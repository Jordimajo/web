{"ast":null,"code":"var _jsxFileName = \"/Users/jordi/web/web/aplicacion/src/pages/PlayDay.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Producto from './components/Producto';\nimport PrecioSlider from './components/PrecioSlider';\nimport Header from './components/layout/Header';\nimport { comprobarYActualizarPuntos } from './utils/comprobar';\nimport { haJugadoElDia, obtenerPuntosDelDia } from './utils/storage';\nimport { cargarProductosDelDia } from './utils/carga';\nimport Puntuacion from './components/Puntuacion';\nimport ResumenProducto from './components/ResumenProducto';\nimport ResumenFinal from './components/ResumenFinal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PlayDay = () => {\n  _s();\n  const {\n    fecha\n  } = useParams();\n  const [productoActual, setProductoActual] = useState(null);\n  const [precioEstimado, setPrecioEstimado] = useState(0);\n  const [mostrarResultado, setMostrarResultado] = useState(false);\n  const [puntosRecientes, setPuntosRecientes] = useState(0);\n  const [mostrarResumenFinal, setMostrarResumenFinal] = useState(false);\n  const [productosDelDia, setProductosDelDia] = useState([]);\n  const cargarProductoPorIndice = indice => {\n    cargarProductosDelDia().then(productos => {\n      setProductosDelDia(productos);\n      if (indice !== -1 && productos.length > indice) {\n        setProductoActual(productos[indice]);\n        setMostrarResumenFinal(false);\n      } else if (indice === -1) {\n        console.log(\"El jugador ya ha jugado todos los productos del día. Mostrar resumen.\");\n        setProductoActual(null);\n        setMostrarResumenFinal(true);\n      }\n    });\n  };\n  useEffect(() => {\n    const indiceProducto = haJugadoElDia(fecha);\n    cargarProductoPorIndice(indiceProducto);\n  }, [fecha]);\n  const comprobarPrecio = () => {\n    const puntosGanados = comprobarYActualizarPuntos(fecha, precioEstimado, productoActual.precio);\n    setPuntosRecientes(puntosGanados);\n    setMostrarResultado(true);\n  };\n  const irAlSiguienteProducto = () => {\n    const nuevoIndice = haJugadoElDia(fecha);\n    cargarProductoPorIndice(nuevoIndice);\n    setMostrarResultado(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), productoActual ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Puntuacion, {\n        puntos: obtenerPuntosDelDia(fecha),\n        indiceSiguienteProducto: haJugadoElDia(fecha),\n        totalProductos: 5\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }, this), mostrarResultado ? /*#__PURE__*/_jsxDEV(ResumenProducto, {\n        puntos: puntosRecientes,\n        descuentos: productoActual.descuentos,\n        url: productoActual.url,\n        irAlSiguienteProducto: irAlSiguienteProducto,\n        comercio: productoActual.comercio\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(Producto, {\n        producto: productoActual\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(PrecioSlider, {\n        precioEstimado: precioEstimado,\n        setPrecioEstimado: setPrecioEstimado,\n        precioReal: productoActual.precio,\n        precioCorrecto: mostrarResultado ? productoActual.precio : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this), !mostrarResultado && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: comprobarPrecio,\n        children: \"Comprobar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 43\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }, this) : mostrarResumenFinal ? /*#__PURE__*/_jsxDEV(ResumenFinal, {\n      productosDelDia: productosDelDia,\n      puntuacionDelDia: obtenerPuntosDelDia(fecha),\n      fecha: fecha\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n};\n_s(PlayDay, \"QDrvGYJG6hJGM2zmMLL2VTaViL0=\", false, function () {\n  return [useParams];\n});\n_c = PlayDay;\nexport default PlayDay;\nvar _c;\n$RefreshReg$(_c, \"PlayDay\");","map":{"version":3,"names":["React","useState","useEffect","useParams","Producto","PrecioSlider","Header","comprobarYActualizarPuntos","haJugadoElDia","obtenerPuntosDelDia","cargarProductosDelDia","Puntuacion","ResumenProducto","ResumenFinal","jsxDEV","_jsxDEV","PlayDay","_s","fecha","productoActual","setProductoActual","precioEstimado","setPrecioEstimado","mostrarResultado","setMostrarResultado","puntosRecientes","setPuntosRecientes","mostrarResumenFinal","setMostrarResumenFinal","productosDelDia","setProductosDelDia","cargarProductoPorIndice","indice","then","productos","length","console","log","indiceProducto","comprobarPrecio","puntosGanados","precio","irAlSiguienteProducto","nuevoIndice","className","children","fileName","_jsxFileName","lineNumber","columnNumber","puntos","indiceSiguienteProducto","totalProductos","descuentos","url","comercio","producto","precioReal","precioCorrecto","onClick","puntuacionDelDia","_c","$RefreshReg$"],"sources":["/Users/jordi/web/web/aplicacion/src/pages/PlayDay.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Producto from './components/Producto';\nimport PrecioSlider from './components/PrecioSlider';\nimport Header from './components/layout/Header';\nimport { comprobarYActualizarPuntos } from './utils/comprobar';\nimport { haJugadoElDia, obtenerPuntosDelDia } from './utils/storage';\nimport { cargarProductosDelDia } from './utils/carga';\nimport Puntuacion from './components/Puntuacion';\nimport ResumenProducto from './components/ResumenProducto';\nimport ResumenFinal from './components/ResumenFinal';\n\n\nconst PlayDay = () => {\n    const { fecha } = useParams();\n    const [productoActual, setProductoActual] = useState(null);\n    const [precioEstimado, setPrecioEstimado] = useState(0);\n    const [mostrarResultado, setMostrarResultado] = useState(false);\n    const [puntosRecientes, setPuntosRecientes] = useState(0);\n    const [mostrarResumenFinal, setMostrarResumenFinal] = useState(false);\n    const [productosDelDia, setProductosDelDia] = useState([]);\n\n    const cargarProductoPorIndice = (indice) => {\n        cargarProductosDelDia().then(productos => {\n            setProductosDelDia(productos);\n            if (indice !== -1 && productos.length > indice) {\n                setProductoActual(productos[indice]);\n                setMostrarResumenFinal(false);\n            } else if (indice === -1) {\n                console.log(\"El jugador ya ha jugado todos los productos del día. Mostrar resumen.\");\n                setProductoActual(null);\n                setMostrarResumenFinal(true);\n            }\n        });\n    };\n\n    useEffect(() => {\n        const indiceProducto = haJugadoElDia(fecha);\n        cargarProductoPorIndice(indiceProducto);\n    }, [fecha]);\n\n    const comprobarPrecio = () => {\n        const puntosGanados = comprobarYActualizarPuntos(fecha, precioEstimado, productoActual.precio);\n        setPuntosRecientes(puntosGanados);\n        setMostrarResultado(true);\n    };\n\n\n    const irAlSiguienteProducto = () => {\n        const nuevoIndice = haJugadoElDia(fecha);\n        cargarProductoPorIndice(nuevoIndice);\n        setMostrarResultado(false);\n    };\n\n\n    return (\n        <div className=\"App\">\n            <Header />\n            {productoActual ? (\n                <div>\n                    <Puntuacion\n                        puntos={obtenerPuntosDelDia(fecha)}\n                        indiceSiguienteProducto={haJugadoElDia(fecha)}\n                        totalProductos={5}\n                    />\n\n                    {mostrarResultado ? (\n                        <ResumenProducto\n                            puntos={puntosRecientes}\n                            descuentos={productoActual.descuentos}\n                            url={productoActual.url}\n                            irAlSiguienteProducto={irAlSiguienteProducto}\n                            comercio={productoActual.comercio}\n                        />\n                    ) : (\n                        <Producto producto={productoActual} />\n                    )}\n\n                    <PrecioSlider\n                        precioEstimado={precioEstimado}\n                        setPrecioEstimado={setPrecioEstimado}\n                        precioReal={productoActual.precio}\n                        precioCorrecto={mostrarResultado ? productoActual.precio : null}\n                    />\n\n                    {!mostrarResultado && <button onClick={comprobarPrecio}>Comprobar</button>}\n\n                </div>\n            ) : mostrarResumenFinal ? (\n                <ResumenFinal\n                    productosDelDia={productosDelDia}\n                    puntuacionDelDia={obtenerPuntosDelDia(fecha)}\n                    fecha={fecha}\n                />\n            ) : null}\n        </div>\n    );\n\n}\n\nexport default PlayDay;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}