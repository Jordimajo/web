{"ast":null,"code":"var _jsxFileName = \"/Users/jordi/web/web/aplicacion/src/pages/PlayDay.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Producto from '../components/Producto';\nimport PrecioSlider from '../components/PrecioSlider';\nimport { comprobarYActualizarPuntos } from '../utils/comprobar';\nimport { haJugadoElDia, obtenerPuntosDelDia } from '../utils/storage';\nimport { cargarProductosDelDia } from '../utils/carga';\nimport Puntuacion from '../components/Puntuacion';\nimport ResumenProducto from '../components/ResumenProducto';\nimport ResumenFinal from '../components/ResumenFinal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PlayDay = () => {\n  _s();\n  const {\n    fecha\n  } = useParams();\n  const [productoActual, setProductoActual] = useState(null);\n  const [precioEstimado, setPrecioEstimado] = useState(0);\n  const [mostrarResultado, setMostrarResultado] = useState(false);\n  const [puntosRecientes, setPuntosRecientes] = useState(0);\n  const [mostrarResumenFinal, setMostrarResumenFinal] = useState(false);\n  const [productosDelDia, setProductosDelDia] = useState([]);\n  const cargarProductoPorIndice = useCallback(indice => {\n    cargarProductosDelDia(new Date(fecha)).then(productos => {\n      setProductosDelDia(productos);\n      if (indice !== -1 && productos.length > indice) {\n        setProductoActual(productos[indice]);\n        setMostrarResumenFinal(false);\n      } else if (indice === -1) {\n        setProductoActual(null);\n        setMostrarResumenFinal(true);\n      }\n    });\n  }, [fecha]);\n  useEffect(() => {\n    const indiceProducto = haJugadoElDia(fecha);\n    cargarProductoPorIndice(indiceProducto);\n  }, [fecha]);\n  const comprobarPrecio = () => {\n    const puntosGanados = comprobarYActualizarPuntos(fecha, precioEstimado, productoActual.precio);\n    setPuntosRecientes(puntosGanados);\n    setMostrarResultado(true);\n  };\n  const irAlSiguienteProducto = () => {\n    const nuevoIndice = haJugadoElDia(fecha);\n    cargarProductoPorIndice(nuevoIndice);\n    setMostrarResultado(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: productoActual ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Puntuacion, {\n        puntos: obtenerPuntosDelDia(fecha),\n        indiceSiguienteProducto: haJugadoElDia(fecha),\n        totalProductos: 5\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 21\n      }, this), mostrarResultado ? /*#__PURE__*/_jsxDEV(ResumenProducto, {\n        puntos: puntosRecientes,\n        descuentos: productoActual.descuentos,\n        url: productoActual.url,\n        irAlSiguienteProducto: irAlSiguienteProducto,\n        comercio: productoActual.comercio\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(Producto, {\n        producto: productoActual\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(PrecioSlider, {\n        precioEstimado: precioEstimado,\n        setPrecioEstimado: setPrecioEstimado,\n        precioReal: productoActual.precio,\n        precioCorrecto: mostrarResultado ? productoActual.precio : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this), !mostrarResultado && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: comprobarPrecio,\n        children: \"Comprobar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 43\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }, this) : mostrarResumenFinal ? /*#__PURE__*/_jsxDEV(ResumenFinal, {\n      productosDelDia: productosDelDia,\n      puntuacionDelDia: obtenerPuntosDelDia(fecha),\n      fecha: fecha\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }, this) : null\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n};\n_s(PlayDay, \"+St93K4cK2K67J+OAIfX6RmWi54=\", false, function () {\n  return [useParams];\n});\n_c = PlayDay;\nexport default PlayDay;\nvar _c;\n$RefreshReg$(_c, \"PlayDay\");","map":{"version":3,"names":["React","useState","useEffect","useParams","Producto","PrecioSlider","comprobarYActualizarPuntos","haJugadoElDia","obtenerPuntosDelDia","cargarProductosDelDia","Puntuacion","ResumenProducto","ResumenFinal","jsxDEV","_jsxDEV","PlayDay","_s","fecha","productoActual","setProductoActual","precioEstimado","setPrecioEstimado","mostrarResultado","setMostrarResultado","puntosRecientes","setPuntosRecientes","mostrarResumenFinal","setMostrarResumenFinal","productosDelDia","setProductosDelDia","cargarProductoPorIndice","useCallback","indice","Date","then","productos","length","indiceProducto","comprobarPrecio","puntosGanados","precio","irAlSiguienteProducto","nuevoIndice","className","children","puntos","indiceSiguienteProducto","totalProductos","fileName","_jsxFileName","lineNumber","columnNumber","descuentos","url","comercio","producto","precioReal","precioCorrecto","onClick","puntuacionDelDia","_c","$RefreshReg$"],"sources":["/Users/jordi/web/web/aplicacion/src/pages/PlayDay.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Producto from '../components/Producto';\nimport PrecioSlider from '../components/PrecioSlider';\nimport { comprobarYActualizarPuntos } from '../utils/comprobar';\nimport { haJugadoElDia, obtenerPuntosDelDia } from '../utils/storage';\nimport { cargarProductosDelDia } from '../utils/carga';\nimport Puntuacion from '../components/Puntuacion';\nimport ResumenProducto from '../components/ResumenProducto';\nimport ResumenFinal from '../components/ResumenFinal';\n\n\n\nconst PlayDay = () => {\n    const { fecha } = useParams();\n    const [productoActual, setProductoActual] = useState(null);\n    const [precioEstimado, setPrecioEstimado] = useState(0);\n    const [mostrarResultado, setMostrarResultado] = useState(false);\n    const [puntosRecientes, setPuntosRecientes] = useState(0);\n    const [mostrarResumenFinal, setMostrarResumenFinal] = useState(false);\n    const [productosDelDia, setProductosDelDia] = useState([]);\n\n    const cargarProductoPorIndice = useCallback((indice) => {\n        cargarProductosDelDia(new Date(fecha)).then(productos => {\n            setProductosDelDia(productos);\n            if (indice !== -1 && productos.length > indice) {\n                setProductoActual(productos[indice]);\n                setMostrarResumenFinal(false);\n            } else if (indice === -1) {\n                setProductoActual(null);\n                setMostrarResumenFinal(true);\n            }\n        });\n    }, [fecha]);\n    \n\n    useEffect(() => {\n        const indiceProducto = haJugadoElDia(fecha);\n        cargarProductoPorIndice(indiceProducto);\n    }, [fecha]);\n\n    const comprobarPrecio = () => {\n        const puntosGanados = comprobarYActualizarPuntos(fecha, precioEstimado, productoActual.precio);\n        setPuntosRecientes(puntosGanados);\n        setMostrarResultado(true);\n    };\n\n\n    const irAlSiguienteProducto = () => {\n        const nuevoIndice = haJugadoElDia(fecha);\n        cargarProductoPorIndice(nuevoIndice);\n        setMostrarResultado(false);\n    };\n\n\n    return (\n        <div className=\"App\">\n            {productoActual ? (\n                <div>\n                    <Puntuacion\n                        puntos={obtenerPuntosDelDia(fecha)}\n                        indiceSiguienteProducto={haJugadoElDia(fecha)}\n                        totalProductos={5}\n                    />\n\n                    {mostrarResultado ? (\n                        <ResumenProducto\n                            puntos={puntosRecientes}\n                            descuentos={productoActual.descuentos}\n                            url={productoActual.url}\n                            irAlSiguienteProducto={irAlSiguienteProducto}\n                            comercio={productoActual.comercio}\n                        />\n                    ) : (\n                        <Producto producto={productoActual} />\n                    )}\n\n                    <PrecioSlider\n                        precioEstimado={precioEstimado}\n                        setPrecioEstimado={setPrecioEstimado}\n                        precioReal={productoActual.precio}\n                        precioCorrecto={mostrarResultado ? productoActual.precio : null}\n                    />\n\n                    {!mostrarResultado && <button onClick={comprobarPrecio}>Comprobar</button>}\n\n                </div>\n            ) : mostrarResumenFinal ? (\n                <ResumenFinal\n                    productosDelDia={productosDelDia}\n                    puntuacionDelDia={obtenerPuntosDelDia(fecha)}\n                    fecha={fecha}\n                />\n            ) : null}\n        </div>\n    );\n\n}\n\nexport default PlayDay;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}